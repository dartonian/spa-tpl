{
  "name": "gulp-cdnizer",
  "version": "0.2.11",
  "description": "A gulp plugin for replacing local links with CDN links, includes fallbacks and customization",
  "keywords": [
    "gulpplugin",
    "cdn"
  ],
  "homepage": "https://github.com/OverZealous/gulp-cdnizer",
  "bugs": {
    "url": "https://github.com/OverZealous/gulp-cdnizer/issues"
  },
  "author": {
    "name": "Phil DeJarnett",
    "url": "https://github.com/OverZealous"
  },
  "main": "./index.js",
  "repository": {
    "type": "git",
    "url": "git://github.com/OverZealous/gulp-cdnizer.git"
  },
  "scripts": {
    "test": "istanbul test _mocha --report html -- test/*.js --reporter spec",
    "coveralls": "istanbul cover ./node_modules/mocha/bin/_mocha --report lcovonly -- -R spec && cat ./coverage/lcov.info | ./node_modules/coveralls/bin/coveralls.js && rm -rf ./coverage"
  },
  "dependencies": {
    "through2": "^0.5.1",
    "gulp-util": "^3.0.0",
    "cdnizer": "^0.2.11"
  },
  "devDependencies": {
    "mocha": "*",
    "coveralls": "*",
    "mocha-lcov-reporter": "*",
    "istanbul": "*",
    "event-stream": "*",
    "should": "~2.1.0"
  },
  "engines": {
    "node": ">=0.8.0",
    "npm": ">=1.2.10"
  },
  "licenses": [
    {
      "type": "MIT"
    }
  ],
  "readme": "# gulp-cdnizer\n[![NPM version][npm-image]][npm-url] [![Build Status][travis-image]][travis-url]\n\n> cdnizer plugin for [gulp](https://github.com/wearefractal/gulp)\n\nThis plugin will replace references in HTML and other files with CDN locations.  It's flexible without being overly complicated, and handles private *and* public CDNs.  It can use your bower installation to determine file versions.\n\nIt also provides optional fallback scripts for failed file loading.  By default it can only handle failed JavaScript files, but it shouldn't be too difficult to provide a better script.\n\n> ## WARNING\n>\n> This plugin does not check incoming files.  Do not run it on files that you do not want modified.\n\n## Usage\n\nFirst, install `gulp-cdnizer` as a development dependency:\n\n```shell\nnpm install --save-dev gulp-cdnizer\n```\n\nThen, add it to your `gulpfile.js`:\n\n```javascript\nvar cdnizer = require(\"gulp-cdnizer\");\n\ngulp.src(\"./src/index.html\")\n        .pipe(cdnizer({\n            defaultBase: \"//my.cdn.host/base\",\n            allowRev: true,\n            allowMin: true,\n            files: [\n                'js/app.js',\n                {\n                    file: 'vendor/angular/angular.js',\n                    package: 'angular',\n                    test: 'angular',\n                    // angular has a bizarre version string inside bower, with extra information.\n                    // using major.minor.patch directly ensures it works with the CDN\n                    cdn: '//ajax.googleapis.com/ajax/libs/angularjs/${ major }.${ minor }.${ patch }/angular.min.js'\n                },\n                {\n                    file: 'vendor/firebase/firebase.js',\n                    test: 'Firebase',\n                    cdn: '//cdn.firebase.com/v0/firebase.js'\n                }\n            ]\n        }))\n        .pipe(gulp.dest(\"./dist\"));\n```\n     \nAlternatively, you can just pass in the files array if you don't need to provide any options, and only have custom files:\n\n```js\ngulp.src(\"./src/index.html\")\n        .pipe(cdnizer([\n            {\n                file: 'vendor/angular/angular.js',\n                package: 'angular',\n                test: 'angular',\n                // use altnerate providers easily\n                cdn: '//cdnjs.cloudflare.com/ajax/libs/angularjs/${ major }.${ minor }.${ patch }/angular.min.js'\n            },\n            {\n                file: 'vendor/firebase/firebase.js',\n                test: 'Firebase',\n                cdn: '//cdn.firebase.com/v0/firebase.js'\n            }\n        ]))\n        .pipe(gulp.dest(\"./dist\"));\n```\n\nYou can also use globs to define groups of file, and dynamic filename properties:\n\n```js\ngulp.src(\"./src/index.html\")\n        .pipe(cdnizer([{\n                file: 'vendor/angular/*.js',\n                package: 'angular',\n                test: 'angular',\n                cdn: '//ajax.googleapis.com/ajax/libs/angularjs/${ major }.${ minor }.${ patch }/${ filenameMin }'\n            }]))\n        .pipe(gulp.dest(\"./dist\"));\n```\n\nWorks great on `url()`s in CSS files, too:\n\n```js\ngulp.src(\"./src/css/style.css\")\n        .pipe(cdnizer({\n            defaultCDNBase: '//my.cdn.url/',\n            relativeRoot: 'css',\n            files: ['**/*.{gif,png,jpg,jpeg}']\n        }))\n        .pipe(gulp.dest(\"./dist/css/\"));\n```\n\n## API\n\n### cdnizer(options|files)\n\nNote: If options is an array, it is assumed to be the array of files to process, and the rest of the options are left as their default.\n\n#### options.defaultCDNBase\n\nType: `String`  \nDefault: `''` (disabled)\n\nUsed for a default, custom CDN, usually for your own files.  This will be used in the defaultCDN property to define the default path for a CDN unless overridden.\n\n#### options.defaultCDN\n\nType: `String`  \nDefault: `'${ defaultCDNBase }/${ filepathRel }'`\n\nThis is the default pattern used for generating CDN links when one isn't provided by a specific file. \n\n#### options.relativeRoot\n\nType: `String`  \nDefault: `''`\n\nIf you are processing a file that references relative files, or is not rooted to the CDN, you can set `relativeRoot` to get correct results.\n\nFor example, if you have a CSS file under `style/`, and you reference images as `../img/foo.png`, you should set `relativeRoot` to `style/`.  Now if your `defaultCDNBase` is `//example/`, the image will be resolved to `//example/img/foo.png`.  \n\n#### options.allowRev\nType: `Boolean`  \nDefault: `true`\n\nAllow for file names with `gulp-rev` appended strings, in the form of `<file>-XXXXXXXX.<ext>`.  If you are using the `gulp-rev` plugin, this will automatically match filenames that have a rev string appeneded to them.  If you are *not* using `gulp-rev`, then you can disable this by setting `allowRev` to `false`, which will prevent possible errors in accidentally matching similar file names.\n\nYou can always manually configure your globs to include an optional rev string by using the form `?(<rev glob here>)`, such as `name?(-????????).ext` for appended revs.\n\n#### options.allowMin\n\nType: `Boolean`  \nDefault: `true`\n\nAllow for file names that optionally have `.min` inserted before the file extension (but after rev, if enabled).  This allows you to use the base name for a file, and have `cndizer` match the minified name.\n\n#### options.fallbackScript\n\nType: `String`  \nDefault: \n\n```html\n<script>\nfunction cdnizerLoad(u) {\n\tdocument.write('<scr'+'ipt src=\"'+encodeURIComponent(u)+'\"></scr'+'ipt>';\n}\n</script>\n```\n\nOverwrite the default fallback script.  If any of the inputs has a fallback, this script is injected before the first occurence of `<link`, `<script`, or `</head>` in the HTML page.  Ignored for files that don't contain `<head`.\n\nIf you already have a script loader (such as yepnope or Modernizr), you can set this to an empty string and override the `fallbackTest` below to use that instead.  Of course, this won't help if you are loading those scripts off a CDN and they fail!\n\n#### options.fallbackTest\n\nType: `String`  \nDefault: `'<script>if(!(${ test })) cdnizerLoad(\"${ filepath }\");</script>'`\n\nOverwrite the default fallback test.  Note that all options availble to `options.files[].cdn` below are available to this template as well, along with the `options.files[].test` string.\n\n#### options.bowerComponents\n\nType: `String`  \nDefault: null\n\nIf provided, this is the directory to look for bower components in.  If not provided, cdnizer will attempt to look for the `.bowerrc` file, and if that is not found or does not specify a directory, it falls back to `'./bower_components'`.\n\nOnce the directory is determined, the script will look for files in `<bowerComponents>/bower.json` or `<bowerComponents>/.bower.json` to try to determine the version of the installed component.\n\n#### options.files\n\nType: `Array`  \nDefault: (none) **required**\n\nArray of sources or objects defining sources to cdnize.  Each item in the array can be one of two types, a simple glob or object hashmap.\n\nWhen using a glob, if it matches a source, the `defaultCDN` template is applied.  Because there is no `test`, the script will not have a fallback.  \n\nThe object hashmap gives you full control, using the following properties:\n\n> ##### options.files[].file\n\n> Type: `String`  \n> Default: (none) **required**\n\n> Glob to match against for the file to cdnize.  All properties within this object will be applied to all files that match the glob.  Globs are matched in a first-come, first-served basis, where only the first matched object hashmap is applied.\n\n> ##### options.files[].package\n\n> Type: `String`  \n> Default: (none)\n\n> Bower package name for this source or set of sources.  By providing the package name, cdnizer will look up the version string of the *currently installed* bower package, and provide it as a property to the `cdn` string.  This is done by looking for either the `bower.json` or `.bower.json` file within your bower components directory.\n\n> The benefit of doing it this way is that the version used from the CDN *always* matches your local copy.  It won't be automatically updated to the latest patch version without being tested. \n\n> ##### options.files[].cdn\n\n> Type: `String`  \n> Default: `options.defaultCDN`\n\n> Provides a custom CDN string, which can be a simple static string, or contain one or more underscore/lodash template properties to be injected into the string:\n\n> * `version`: if [`package`](#optionsfilespackage) was provided, this is the currently installed version from bower.\n> * `major`: if `package` was provided, this is the major version number.\n> * `minor`: if `package` was provided, this is the minor version number.\n> * `patch`: if `package` was provided, this is the patch version number.\n> * `defaultBase`: the default base provided above.  Note that this will *never* end with a trailing slash.\n> * `filepath`: the full path of the source, as it exists currently.  There is no guarantee about the whether this contains a leading slash or not, so be careful.\n> * `filepathRel`: the full path of the source, but guaranteed to *never* have a leading slash.\n> * `filename`: the name of the file, without any parent directories\n> * `filenameMin`: the name of the file, *without* any rev tags (if `allowRev` is true), but *with* a `.min` extension added.  This won't add a min if there is one already. \n> * `package`: the bower package name, as provided above.\n\n> ##### options.files[].test\n\n> Type: `String`  \n> Default: (none)\n\n> If provided, this string will be evaluated within a javascript block.  If the result is truthy, then we assume the CDN resource loaded properly.  If it isn't, then the original local file will be loaded.  This is ignored for files that don't get the [fallback script](#optionsfallbackscript).\n\n> See [`options.fallbackScript`](#optionsfallbackscript) and [`options.fallbackTest`](#optionsfallbacktest) for more information.\n\n#### options.matchers\n\nType: `Array`  \nDefault: `[]`\n\nArray of custom matchers. Use this to add extra patterns within which you would like to cdn-ize URLs, for example if you have such URLs in data-attributes. The matchers should include regular expressions with three matching groups: 1) Leading characters 2) The actual URL to work on 3) Trailing characters.\n\nExample (matches the ```data-src``` attribute in ```<img>``` tags):<br />\n```matchers: [ { pattern: /(<img\\s.*?data-src=[\"'])(.+?)([\"'].*?>)/gi, fallback: false } ]```\n\nYou can also specify just a regular expression. In that case, fallback will default to false.\n\nEquivalent example:<br />\n```matchers: [ pattern: /(<img\\s.*?data-src=[\"'])(.+?)([\"'].*?>)/gi ]```\n\n## Help Support This Project\n\nIf you'd like to support this and other OverZealous Creations (Phil DeJarnett) projects, [donate via Gittip][gittip-url]!\n\n[![Support via Gittip][gittip-image]][gittip-url]\n\nYou can learn a little more about me and some of the [work I do for open source projects in an article at CDNify.](https://cdnify.com/blog/overzealous-creations/)\n\n## License\n\n[MIT License](http://en.wikipedia.org/wiki/MIT_License)\n\n[npm-url]: https://npmjs.org/package/gulp-cdnizer\n[npm-image]: https://badge.fury.io/js/gulp-cdnizer.png\n\n[travis-url]: http://travis-ci.org/OverZealous/gulp-cdnizer\n[travis-image]: https://secure.travis-ci.org/OverZealous/gulp-cdnizer.png?branch=master\n\n[gittip-url]: https://www.gittip.com/OverZealous/\n[gittip-image]: https://raw2.github.com/OverZealous/gittip-badge/0.1.2/dist/gittip.png\n",
  "readmeFilename": "README.md",
  "_id": "gulp-cdnizer@0.2.11",
  "dist": {
    "shasum": "4948305c69e7531c02457d40325ac8dab672949a"
  },
  "_from": "gulp-cdnizer@^0.2.11",
  "_resolved": "https://registry.npmjs.org/gulp-cdnizer/-/gulp-cdnizer-0.2.11.tgz"
}
